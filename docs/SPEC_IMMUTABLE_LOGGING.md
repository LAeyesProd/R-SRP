# ðŸ”’ SpÃ©cification: Journalisation Immuable et Preuve Cryptographique

> Note de statut (repo actuel)
>
> Ce document decrit principalement une cible d'architecture / une specification normative.
> L'implementation Rust du depot couvre le socle (chainage, Merkle, publication),
> mais certains points restent partiels ou en mode placeholder (notamment TSA RFC 3161 reel).
> Se referer aussi a `docs/README_IMMUTABLE_LEDGER.md` pour l'etat d'implementation actuel.

## 1. Vue d'Ensemble

Ce document spÃ©cifie le systÃ¨me de journalisation immuable qui garantit la **non-altÃ©ration, la traÃ§abilitÃ© complÃ¨te et la valeur probante juridiquement** de chaque consultation du registre national des comptes bancaires.

---

## 2. Architecture de la Journalisation

### 2.1 Principes Fondamentaux

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRINCIPES JOURNALISATION IMMUABLE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. IMMUABILITÃ‰                                                      â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚   â”‚
â”‚  â”‚     Une fois Ã©crit, un log ne peut JAMAIS Ãªtre modifiÃ© ou         â”‚   â”‚
â”‚  â”‚     supprimÃ©. Tout systÃ¨me de stockage sous-jacent doit            â”‚   â”‚
â”‚  â”‚     garantir cette propriÃ©tÃ©.                                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚    ImplÃ©mentation:                                                  â”‚   â”‚
â”‚  â”‚     - WORM (Write Once Read Many) sur stockage                     â”‚   â”‚
â”‚  â”‚     - Hachage chainÃ© (chaque entrÃ©e hash la prÃ©cÃ©dente)            â”‚   â”‚
â”‚  â”‚     - Architecture append-only                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. INTÃ‰GRITÃ‰ PROUVABLE                                             â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚   â”‚
â”‚  â”‚     Chaque log contient son propre hash + hash de l'entrÃ©e        â”‚   â”‚
â”‚  â”‚     prÃ©cÃ©dente, crÃ©ant une chaÃ®ne vÃ©rifiable.                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚    ImplÃ©mentation:                                                  â”‚   â”‚
â”‚  â”‚     - SHA-256 de chaque entrÃ©e                                     â”‚   â”‚
â”‚  â”‚     - Hachage dans Merkle Tree horaire                             â”‚   â”‚
â”‚  â”‚     - Publication racine quotidienne                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. TRAÃ‡ABILITÃ‰ COMPLÃˆTE                                            â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚   â”‚
â”‚  â”‚     Chaque Ã©vÃ©nement est traÃ§able de bout en bout:                â”‚   â”‚
â”‚  â”‚     Qui? Quand? Quoi? Comment?                                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚    ImplÃ©mentation:                                                  â”‚   â”‚
â”‚  â”‚     - Identifiant unique de chaque entrÃ©e                          â”‚   â”‚
â”‚  â”‚     - Horodatage certifiÃ©                                           â”‚   â”‚
â”‚  â”‚     - MÃ©tadonnÃ©es complÃ¨tes                                        â”‚   â”‚
â”‚  â”‚     - Contexte de la requÃªte                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  4. VALEUR PROBANTE                                                  â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚   â”‚
â”‚  â”‚     Les logs doivent Ãªtre acceptables comme preuve en              â”‚   â”‚
â”‚  â”‚     justice.                                                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚    ImplÃ©mentation:                                                  â”‚   â”‚
â”‚  â”‚     - Signature numÃ©rique qualifiÃ©e                                â”‚   â”‚
â”‚  â”‚     - Horodatage TSA (Time Stamping Authority)                    â”‚   â”‚
â”‚  â”‚     - Publication quotidienne (Journal Officiel)                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Construction de la Preuve Cryptographique

### 3.1 ChaÃ®nage des Logs

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAÃŽNAGE HASH LOGS                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Structure de chaÃ®ne:                                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Entry   â”‚      â”‚  Entry   â”‚      â”‚  Entry   â”‚      â”‚  Entry   â”‚     â”‚
â”‚  â”‚   N-2    â”‚ â”€â”€â”€â”€â–¶â”‚   N-1    â”‚ â”€â”€â”€â”€â–¶â”‚    N     â”‚ â”€â”€â”€â”€â–¶â”‚   N+1    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚                  â”‚                  â”‚                  â”‚          â”‚
â”‚       â–¼                  â–¼                  â–¼                  â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ H(N-2)  â”‚        â”‚ H(N-1)  â”‚        â”‚  H(N)   â”‚        â”‚ H(N+1)  â”‚    â”‚
â”‚  â”‚ sha256  â”‚        â”‚ sha256  â”‚        â”‚ sha256  â”‚        â”‚ sha256  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                 â”‚                  â”‚                  â”‚         â”‚
â”‚       â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                  â”‚         â”‚
â”‚       â”‚        â”‚                 â”‚          â”‚                  â”‚         â”‚
â”‚       â”‚        â–¼                 â–¼          â–¼                  â”‚         â”‚
â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚         â”‚
â”‚       â”‚   â”‚    Entry N                    â”‚   â”‚                  â”‚         â”‚
â”‚       â”‚   â”‚  - previous_hash: H(N-1)    â”‚   â”‚                  â”‚         â”‚
â”‚       â”‚   â”‚  - content_hash: H(payload) â”‚â—€â”€â”€â”˜                  â”‚         â”‚
â”‚       â”‚   â”‚  - entry_id: UUID            â”‚                      â”‚         â”‚
â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚         â”‚
â”‚       â”‚                                                           â”‚         â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                    Chaque entrÃ©e rÃ©fÃ©rence la prÃ©cÃ©dente                   â”‚
â”‚                                                                             â”‚
â”‚  FORMULE:                                                                   â”‚
â”‚  H(n) = SHA256(entry_id + timestamp + previous_hash + content + nonce)   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Merkle Tree Horaire

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MERKLE TREE - CONSTRUCTION HORAIRE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Objectif: CrÃ©er une racine unique pour toutes les entrÃ©es d'une heure   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    HEURE: 14:00 - 15:00                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚   â”‚
â”‚  â”‚                        â”‚  Root    â”‚  H(ABCD) = SHA256(H(AB) ||     â”‚   â”‚
â”‚  â”‚                        â”‚  Hash    â”‚              H(CD))            â”‚   â”‚
â”‚  â”‚                        â”‚ H(DCAB)  â”‚  PubliÃ©e: 15:15                 â”‚   â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                  â”‚   â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                          â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚         â”‚   H    â”‚ â”‚    I       â”‚ â”‚    J        â”‚                   â”‚   â”‚
â”‚  â”‚         â”‚  (0-7) â”‚ â”‚  (8-15)    â”‚ â”‚  (16-23)    â”‚                   â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚  â”‚   â”‚Leaf 0  â”‚â”‚Leaf 2  â”‚â”‚Leaf 4   â”‚â”‚Leaf 6         â”‚               â”‚   â”‚
â”‚  â”‚   â”‚evt_001 â”‚â”‚evt_003 â”‚â”‚evt_005  â”‚â”‚evt_007        â”‚               â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚  â”‚   â”‚Leaf 1  â”‚â”‚Leaf 3  â”‚â”‚Leaf 5   â”‚â”‚Leaf 7         â”‚               â”‚   â”‚
â”‚  â”‚   â”‚evt_002 â”‚â”‚evt_004 â”‚â”‚evt_006  â”‚â”‚evt_008        â”‚               â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   Total entrÃ©es: 8 (exemple pour 1000 entrÃ©es: arbre de 1024)      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  PUBLICATION:                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  15:15 - Publication Root Hash + Timestamp + Signature             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  {                                                                    â”‚   â”‚
â”‚  â”‚    "hour": "2026-02-23T14:00:00Z",                                 â”‚   â”‚
â”‚  â”‚    "root_hash": "sha256:dcab9f8e7d6c5b4a3...",                    â”‚   â”‚
â”‚  â”‚    "entry_count": 15432,                                           â”‚   â”‚
â”‚  â”‚    "published_at": "2026-02-23T15:15:00Z",                        â”‚   â”‚
â”‚  â”‚    "signature": "RSA-PSS(...)",                                    â”‚   â”‚
â”‚  â”‚    "tsa_timestamp": "2026-02-23T15:15:00.123Z"                   â”‚   â”‚
â”‚  â”‚  }                                                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Structure des EntrÃ©es de Log

### 4.1 SchÃ©ma JSON

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RNBC Immutable Log Entry",
  "type": "object",
  "required": [
    "entry_id",
    "version",
    "timestamp_unix",
    "timestamp_iso",
    "event",
    "actor",
    "request",
    "context",
    "integrity",
    "compliance"
  ],
  "properties": {
    "entry_id": {
      "type": "string",
      "pattern": "^le_[0-9]{17}_[a-f0-9]{8}$",
      "description": "Identifiant unique de l'entrÃ©e"
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+$",
      "description": "Version du schÃ©ma"
    },
    "timestamp_unix": {
      "type": "integer",
      "description": "Timestamp Unix epoch"
    },
    "timestamp_iso": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp"
    },
    "signature_algorithm": {
      "type": "string",
      "enum": ["RSA-SHA256", "RSA-PSS-SHA256", "ECDSA-P256"],
      "description": "Algorithme de signature"
    },
    "event": {
      "type": "object",
      "required": ["event_id", "event_type", "event_version"],
      "properties": {
        "event_id": {
          "type": "string",
          "pattern": "^evt_[0-9]{17}_[a-f0-9]{4}$"
        },
        "event_type": {
          "type": "string",
          "enum": [
            "ACCOUNT_QUERY",
            "AUTH_SUCCESS",
            "AUTH_FAILURE",
            "SESSION_START",
            "SESSION_END",
            "RULE_VIOLATION",
            "ANOMALY_DETECTED",
            "TOKEN_REVOKED",
            "MISSION_CREATED",
            "MISSION_EXPIRED"
          ]
        },
        "event_version": {
          "type": "string"
        }
      }
    },
    "actor": {
      "type": "object",
      "required": ["agent_id", "agent_org"],
      "properties": {
        "agent_id": {
          "type": "string",
          "pattern": "^AGENT_[0-9]{4}$"
        },
        "agent_name": {
          "type": "string"
        },
        "agent_org": {
          "type": "string",
          "enum": [
            "FISCALITE_DGFiP",
            "FISCALITE_DGDDI",
            "JUSTICE_TRIBUNAL",
            "JUSTICE_PJ",
            "GENDARMERIE_NATIONALE",
            "POLICE_NATIONALE",
            "DOUANES",
            "BANQUE_CENTRALE"
          ]
        },
        "org_code": {
          "type": "string"
        },
        "mission_id": {
          "type": "string",
          "pattern": "^MIS_[0-9]{4}_[0-9]{4}$"
        },
        "mission_type": {
          "type": "string"
        },
        "mission_authorization": {
          "type": "string",
          "description": "RÃ©fÃ©rence judiciaire si applicable"
        }
      }
    },
    "request": {
      "type": "object",
      "properties": {
        "query_type": {
          "type": "string",
          "enum": [
            "SEARCH_BY_NAME",
            "SEARCH_BY_IBAN",
            "SEARCH_BY_NIR",
            "SEARCH_BY_ACCOUNT_NUMBER",
            "HISTORY_LOOKUP"
          ]
        },
        "query_params_hash": {
          "type": "string",
          "description": "SHA-256 des paramÃ¨tres de recherche"
        },
        "query_params_encrypted": {
          "type": "string",
          "description": "ParamÃ¨tres chiffrÃ©s (GPG)"
        },
        "justification": {
          "type": "string",
          "minLength": 10
        },
        "result_limit": {
          "type": "integer",
          "maximum": 50
        },
        "actual_results": {
          "type": "integer"
        }
      }
    },
    "context": {
      "type": "object",
      "properties": {
        "ip_address": {
          "type": "string",
          "format": "ipv4"
        },
        "ip_geolocation": {
          "type": "object",
          "properties": {
            "country": {"type": "string"},
            "region": {"type": "string"},
            "city": {"type": "string"}
          }
        },
        "device_fingerprint": {
          "type": "string",
          "pattern": "^fp_[a-f0-9]{12}$"
        },
        "device_platform": {
          "type": "string"
        },
        "mfa_method": {
          "type": "string",
          "enum": ["FIDO2_HW_KEY", "CERTIFICAT", "TOTP"]
        },
        "session_id": {
          "type": "string",
          "pattern": "^sess_[a-f0-9]{12}$"
        }
      }
    },
    "integrity": {
      "type": "object",
      "required": [
        "content_hash",
        "previous_entry_hash"
      ],
      "properties": {
        "content_hash": {
          "type": "string",
          "description": "SHA-256 du contenu de l'entrÃ©e"
        },
        "previous_entry_hash": {
          "type": "string",
          "description": "Hash de l'entrÃ©e prÃ©cÃ©dente"
        },
        "merkle_proof": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "side": {"type": "string", "enum": ["left", "right"]},
              "hash": {"type": "string"}
            }
          }
        }
      }
    },
    "compliance": {
      "type": "object",
      "properties": {
        "gdpr_legal_basis": {
          "type": "string",
          "enum": [
            "MISSION_PUBLIQUE",
            "OBLIGATION_LEGALE",
            "INTERET_PUBLIC"
          ]
        },
        "retention_period_years": {
          "type": "integer",
          "enum": [10]
        },
        "anonymization_date": {
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}
```

---

## 5. Publication Quotidienne

### 5.1 Format de Publication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PUBLICATION QUOTIDIENNE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  HEURE: 00:05 UTC (chaque jour)                                            â”‚
â”‚                                                                             â”‚
â”‚  DESTINATIONS:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. Journal Officiel (France)                                        â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚     Publication du hash racine + signature + timestamp             â”‚   â”‚
â”‚  â”‚     URL: https://journal-officiel.gouv.fr/                         â”‚   â”‚
â”‚  â”‚     Section: Avisæ¡‘                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. Blockchain Consortium (Hyperledger Fabric)                     â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚     Transaction contenant:                                          â”‚   â”‚
â”‚  â”‚     - Date                                                          â”‚   â”‚
â”‚  â”‚     - Root Hash                                                     â”‚   â”‚
â”‚  â”‚     - Nombre d'entrÃ©es                                              â”‚   â”‚
â”‚  â”‚     - Signature                                                     â”‚   â”‚
â”‚  â”‚     - Timestamp TSA                                                â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚     Canal: rnbc-audit (privÃ©)                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. Service Web de VÃ©rification                                     â”‚   â”‚
â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚     GET /api/v1/audit/daily/{date}/root                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚     RÃ©ponse:                                                         â”‚   â”‚
â”‚  â”‚     {                                                                â”‚   â”‚
â”‚  â”‚       "date": "2026-02-22",                                         â”‚   â”‚
â”‚  â”‚       "root_hash": "sha256:...",                                   â”‚   â”‚
â”‚  â”‚       "entry_count": 145678,                                        â”‚   â”‚
â”‚  â”‚       "previous_day_hash": "sha256:...",                           â”‚   â”‚
â”‚  â”‚       "signature": "...",                                          â”‚   â”‚
â”‚  â”‚       "published_at": "2026-02-23T00:05:00Z",                      â”‚   â”‚
â”‚  â”‚       "jo_publication_url": "..."                                   â”‚   â”‚
â”‚  â”‚     }                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  STRUCTURE DONNÃ‰ES PUBLIÃ‰E:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  {                                                                    â”‚   â”‚
â”‚  â”‚    "daily_audit": {                                                 â”‚   â”‚
â”‚  â”‚      "date": "2026-02-22",                                          â”‚   â”‚
â”‚  â”‚      "root_hash": "sha256:a1b2c3d4e5f6g7h8i9j0...",               â”‚   â”‚
â”‚  â”‚      "entry_count": 145678,                                         â”‚   â”‚
â”‚  â”‚      "hourly_roots": [                                               â”‚   â”‚
â”‚  â”‚        "sha256:00...",                                             â”‚   â”‚
â”‚  â”‚        "sha256:01...",                                             â”‚   â”‚
â”‚  â”‚        ...                                                          â”‚   â”‚
â”‚  â”‚        "sha256:23..."                                              â”‚   â”‚
â”‚  â”‚      ],                                                              â”‚   â”‚
â”‚  â”‚      "previous_day_root": "sha256:...",                            â”‚   â”‚
â”‚  â”‚      "created_at": "2026-02-23T00:00:00.123Z",                     â”‚   â”‚
â”‚  â”‚      "signature": {                                                 â”‚   â”‚
â”‚  â”‚        "algorithm": "RSA-PSS-SHA256",                              â”‚   â”‚
â”‚  â”‚        "key_id": "rnbc-audit-sig-2026",                           â”‚   â”‚
â”‚  â”‚        "value": "base64encoded..."                                 â”‚   â”‚
â”‚  â”‚      },                                                              â”‚   â”‚
â”‚  â”‚      "tsa_timestamp": {                                            â”‚   â”‚
â”‚  â”‚        "tsa_url": "https://tsa.digicert.com",                     â”‚   â”‚
â”‚  â”‚        "timestamp": "2026-02-23T00:00:00.456Z",                   â”‚   â”‚
â”‚  â”‚        "token": "base64..."                                        â”‚   â”‚
â”‚  â”‚      },                                                              â”‚   â”‚
â”‚  â”‚      "blockchain_tx": {                                             â”‚   â”‚
â”‚  â”‚        "network": "hlf-rnbc-consortium",                          â”‚   â”‚
â”‚  â”‚        "channel": "rnbc-audit",                                    â”‚   â”‚
â”‚  â”‚        "tx_id": "..."                                              â”‚   â”‚
â”‚  â”‚        "block_number": 12345                                       â”‚   â”‚
â”‚  â”‚      }                                                               â”‚   â”‚
â”‚  â”‚    }                                                                 â”‚   â”‚
â”‚  â”‚  }                                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. VÃ©rification d'IntÃ©gritÃ©

### 6.1 API de VÃ©rification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API DE VÃ‰RIFICATION                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. VÃ‰RIFIER UNE ENTRÃ‰E                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/v1/audit/verify/{entry_id}                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  RÃ©ponse:                                                            â”‚   â”‚
â”‚  â”‚  {                                                                  â”‚   â”‚
â”‚  â”‚    "entry_id": "le_20260223143021457a89",                         â”‚   â”‚
â”‚  â”‚    "verified": true,                                               â”‚   â”‚
â”‚  â”‚    "chain_valid": true,                                            â”‚   â”‚
â”‚  â”‚    "hourly_root": "sha256:...",                                   â”‚   â”‚
â”‚  â”‚    "daily_root": "sha256:...",                                    â”‚   â”‚
â”‚  â”‚    "publication_date": "2026-02-23",                              â”‚   â”‚
â”‚  â”‚    "message": "EntrÃ©e valide et intÃ¨gre"                          â”‚   â”‚
â”‚  â”‚  }                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  2. VÃ‰RIFIER JOURNÃ‰E COMPLÃˆTE                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/v1/audit/verify/daily/{date}                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  RÃ©ponse:                                                            â”‚   â”‚
â”‚  â”‚  {                                                                  â”‚   â”‚
â”‚  â”‚    "date": "2026-02-22",                                           â”‚   â”‚
â”‚  â”‚    "verified": true,                                               â”‚   â”‚
â”‚  â”‚    "entry_count": 145678,                                          â”‚   â”‚
â”‚  â”‚    "root_hash_match": true,                                        â”‚   â”‚
â”‚  â”‚    "blockchain_confirmed": true,                                   â”‚   â”‚
â”‚  â”‚    "jo_published": true,                                          â”‚   â”‚
â”‚  â”‚    "message": "JournÃ©e complÃ¨te et intÃ¨gre"                        â”‚   â”‚
â”‚  â”‚  }                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  3. GÃ‰NÃ‰RER PREUVE (pour contexte juridique)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  POST /api/v1/audit/proof                                          â”‚   â”‚
â”‚  â”‚  Body: { "entry_ids": ["le_xxx", "le_yyy"] }                     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  RÃ©ponse:                                                            â”‚   â”‚
â”‚  â”‚  {                                                                  â”‚   â”‚
â”‚  â”‚    "proof_id": "proof_20260223_001",                              â”‚   â”‚
â”‚  â”‚    "generated_at": "2026-02-23T14:30:00Z",                       â”‚   â”‚
â”‚  â”‚    "entries": [ ... ],                                             â”‚   â”‚
â”‚  â”‚    "merkle_proofs": [ ... ],                                       â”‚   â”‚
â”‚  â”‚    "daily_root": "sha256:...",                                    â”‚   â”‚
â”‚  â”‚    "signature": "...",                                             â”‚   â”‚
â”‚  â”‚    "tsa_timestamp": "..."                                         â”‚   â”‚
â”‚  â”‚  }                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Algorithme de VÃ©rification

```python
def verify_entry(entry_id, entry_data, chain_data):
    """
    VÃ©rifie l'intÃ©gritÃ© d'une entrÃ©e de log
    """
    # 1. VÃ©rifier hash local
    calculated_hash = sha256(
        entry_data.content + 
        entry_data.previous_hash + 
        entry_data.nonce
    )
    if calculated_hash != entry_data.stored_hash:
        return VerificationResult(False, "Hash invalide")
    
    # 2. VÃ©rifier chaÃ®ne avec entrÃ©e prÃ©cÃ©dente
    previous_entry = chain_data.get(entry_data.previous_entry_id)
    if previous_entry.hash != entry_data.previous_hash:
        return VerificationResult(False, "ChaÃ®ne rompue")
    
    # 3. VÃ©rifier inclusion dans Merkle Tree horaire
    hourly_root = get_hourly_root(entry_data.timestamp)
    merkle_valid = verify_merkle_proof(
        entry_data.content_hash,
        entry_data.merkle_proof,
        hourly_root
    )
    if not merkle_valid:
        return VerificationResult(False, "Preuve Merkle invalide")
    
    # 4. VÃ©rifier publication racine quotidienne
    daily_root = get_daily_root(entry_data.timestamp.date())
    if hourly_root not in daily_root.hourly_roots:
        return VerificationResult(False, "Heure non publiÃ©e")
    
    # 5. VÃ©rifier signature TSA
    tsa_valid = verify_tsa_timestamp(daily_root.tsa_token)
    if not tsa_valid:
        return VerificationResult(False, "Timestamp TSA invalide")
    
    return VerificationResult(True, "EntrÃ©e valide et intÃ¨gre")
```

---

## 7. RÃ©tention et Archivage

### 7.1 Politique de RÃ©tention

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POLITIQUE DE RÃ‰TENTION                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DURÃ‰E              STOCKAGE              ACCÃˆS                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  < 90 jours         Hot (SSD)             Temps rÃ©el              â”‚   â”‚
â”‚  â”‚  90 jours - 1 an    Warm (HDD)            < 1 heure               â”‚   â”‚
â”‚  â”‚  1 - 7 ans          Cold (Tape/Object)    < 24 heures             â”‚   â”‚
â”‚  â”‚  > 7 ans            Archive (WORM)         Sur demande             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚                                                                             â”‚
â”‚  Note: La chaÃ®ne de hash reste intacte quelque soit le stockage           â”‚
â”‚                                                                             â”‚
â”‚  DURÃ‰ES LÃ‰GALES:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Type de donnÃ©es              DurÃ©e minimale                       â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  Logs authentication          10 ans (prescription pÃ©nale)         â”‚   â”‚
â”‚  â”‚  Logs consultation            10 ans                                â”‚   â”‚
â”‚  â”‚  Logs incidents               10 ans                                â”‚   â”‚
â”‚  â”‚  Preuves ÐºÑ€Ð¸Ð¿Ñ‚ographiques      30 ans                                â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Checklist ImplÃ©mentation

```
â–¡ Composant                  Statut      Date
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ Schema JSON log             [ ]         _________
â–¡ Database append-only       [ ]         _________
â–¡ Hash chaining implÃ©mentÃ©   [ ]         _________
â–¡ Merkle Tree construit      [ ]         _________
â–¡ Signature HSM configurÃ©e   [ ]         _________
â–¡ IntÃ©gration TSA            [ ]         _________
â–¡ Publication blockchain     [ ]         _________
â–¡ Publication JO             [ ]         _________
â–¡ API vÃ©rification            [ ]         _________
â–¡ Tests intÃ©gritÃ©            [ ]         _________
â–¡ Performance tests          [ ]         _________
â–¡ Documentation              [ ]         _________
â–¡ Go-Live                    [ ]         _________
```

---

*Document SpÃ©cification Logging Immuable - Version 1.0*
*Date: 2026-02-23*

